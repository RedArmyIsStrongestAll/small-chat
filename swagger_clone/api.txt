{"openapi":"3.0.1","info":{"title":"Small-Chat","description":"<h2> websocket-controller </h2> <h3> /websocket/endpoint </h3> метод подклчения к ws портоколу <br/><br/>НЕОБХОДИМО передавать jwt token в заголовке Authorization <br/><br/><h3> /chat/send/public </h3>метод отправки сообщений в общий чат, <br/><br/>принимает объект: String <br/><br/><h3> /topic/public </h3> метод подписки к общему чату <br/><br/>возвращает объект: <br/><br/> {\n  \"message\": \"String\",\n  \"sendTime\": \"String\",\n  \"producerUserId\": \"String\"\n} <br/><br/><h3> /user/queue/public.error </h3> метод подписки на обшибки при отпарвке в общий чат <br/><br/>возвращает объект: String <br/><br/><h3> /chat/send/personal </h3> метод отправки сообщений в личный чат <br/><br/>принимает объект:  <br/><br/>{\n  \"message\": \"String\",\n  \"consumerUserId\": \"String\",\n  \"chatId\": Long\n} <br/><br/><h3> /user/queue/personal </h3>метод подписки на все личные чаты <br/><br/>возвращает объект: <br/><br/> {\n  \"message\": \"String\",\n  \"sendTime\": \"String\",\n  \"producerUserId\": \"String\",\n  \"consumerUserId\": \"String\",\n  \"chatId\": Long,\n  \"senderIsProducerInChat\": false,\n  \"userIsProducerInChat\": false\n}<br/><br/>(senderIsProducerInChat - флаг кто отправил сообщение в рамках этого чата: отпарвителю или получателю (для удобаства отображения сообщений)) <br/><br/> (userIsProducerInChat - флаг является ли пользовтаель отправителем в рамках этого чата (для получения истории)) <br/><br/> <h3> /user/queue/private.error </h3> метод подписки на обшибки при отпарвке в личные чат <br/><br/>возвращает объект: String <br/><br/></br><br/> <br/><br/>","version":"v0.0.1"},"externalDocs":{"description":"GitHub","url":"https://github.com/RedArmyIsStrongestAll/small-chat"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"paths":{"/chat/editProfile":{"post":{"tags":["main-http-controller"],"summary":"регистрация имени и фотография","description":"На сервере spring испльзуется @RequestParam анотация для MultipartFile класс для поля photo. <br/>Для этого метода при успешном выполнение поле response = null, code = 200","operationId":"editProfile","parameters":[{"name":"name","in":"query","required":false,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"photo":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseDTOVoid"}}}}}}},"/login/vk":{"get":{"tags":["login-http-controller"],"summary":"пряинтие VK ID токена","description":"на этот метод переправляется сам VK ID, а сам метод переотпраивт пользовтаеля на главную страницу <br/>полученный jwtToken необходимо передвать в заголовке Authorization для каждого запроса","operationId":"registryVk","parameters":[{"name":"payload","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseDTOLoginDTO"}}}}}}},"/login/oauth":{"get":{"tags":["login-http-controller"],"summary":"переотправка на OAuth сервисы","description":"codeType: <br/>1 - VK ID","operationId":"relocation","parameters":[{"name":"codeType","in":"query","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/chat/user":{"get":{"tags":["main-http-controller"],"summary":"получение имени и фотографии по id","operationId":"getUserById","parameters":[{"name":"userId","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseDTOUserDTO"}}}}}}},"/chat/public/history":{"get":{"tags":["main-http-controller"],"summary":"поулчение истории общего чата","description":"offset начинается с 0","operationId":"getPublicHistory","parameters":[{"name":"offset","in":"query","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseDTOListPublicMessageResponseDTO"}}}}}}},"/chat/personal/list":{"get":{"tags":["main-http-controller"],"summary":"поулчение спсика личных чатов","operationId":"getPersonalChatList","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseDTOListChatDTO"}}}}}}},"/chat/personal/history":{"get":{"tags":["main-http-controller"],"summary":"поулчение истории личного чата","description":"offset начинается с 0","operationId":"getPersonalHistory","parameters":[{"name":"chatId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseDTOListPersonalMessageResponseDTO"}}}}}}}},"components":{"schemas":{"ResponseDTOVoid":{"type":"object","properties":{"code":{"type":"integer","description":"код http ответа","format":"int32"},"error":{"type":"string","description":"текст ошибки"},"response":{"type":"object","description":"объект ответа"}},"description":"объект оболочка ответа <br/>вернётся error или response"},"LoginDTO":{"type":"object","properties":{"id":{"type":"string","description":"id пользовтаеля"},"jwtToken":{"type":"string","description":"jwt token идентификации"}},"description":"объект ответа"},"ResponseDTOLoginDTO":{"type":"object","properties":{"code":{"type":"integer","description":"код http ответа","format":"int32"},"error":{"type":"string","description":"текст ошибки"},"response":{"$ref":"#/components/schemas/LoginDTO"}},"description":"объект оболочка ответа <br/>вернётся error или response"},"ResponseDTOUserDTO":{"type":"object","properties":{"code":{"type":"integer","description":"код http ответа","format":"int32"},"error":{"type":"string","description":"текст ошибки"},"response":{"$ref":"#/components/schemas/UserDTO"}},"description":"объект оболочка ответа <br/>вернётся error или response"},"UserDTO":{"type":"object","properties":{"userId":{"type":"string","description":"id собеседника"},"name":{"type":"string","description":"имя собеседника"},"photo":{"type":"array","description":"фотография собеседника","items":{"type":"string","description":"фотография собеседника","format":"byte"}},"photoType":{"type":"string","description":"формат фотографии (пример: \"image/png\")"}},"description":"объект собеседника по чату"},"PublicMessageResponseDTO":{"type":"object","properties":{"message":{"type":"string","description":"сообщение"},"sendTime":{"type":"string","description":"время отправки сообщения (пример: \"13:37\" )"},"producerUserId":{"type":"string","description":"id отправителя"}},"description":"объект получения сообщения из общего чата"},"ResponseDTOListPublicMessageResponseDTO":{"type":"object","properties":{"code":{"type":"integer","description":"код http ответа","format":"int32"},"error":{"type":"string","description":"текст ошибки"},"response":{"type":"array","description":"объект ответа","items":{"$ref":"#/components/schemas/PublicMessageResponseDTO"}}},"description":"объект оболочка ответа <br/>вернётся error или response"},"ChatDTO":{"type":"object","properties":{"chatId":{"type":"integer","description":"id чата","format":"int64"},"partnerUser":{"$ref":"#/components/schemas/UserDTO"}},"description":"объект чата"},"ResponseDTOListChatDTO":{"type":"object","properties":{"code":{"type":"integer","description":"код http ответа","format":"int32"},"error":{"type":"string","description":"текст ошибки"},"response":{"type":"array","description":"объект ответа","items":{"$ref":"#/components/schemas/ChatDTO"}}},"description":"объект оболочка ответа <br/>вернётся error или response"},"PersonalMessageResponseDTO":{"type":"object","properties":{"message":{"type":"string","description":"сообщение"},"sendTime":{"type":"string","description":"время отправки (пример: \"13:37\" )"},"producerUserId":{"type":"string","description":"id отправителя"},"consumerUserId":{"type":"string","description":"id получателя"},"chatId":{"type":"integer","description":"id чата","format":"int64"},"senderIsProducerInChat":{"type":"boolean","description":"флаг кто отправил сообщение в рамках этого чата: отпарвителю или получателю (для удобаства отображения сообщений)"},"userIsProducerInChat":{"type":"boolean","description":"флаг является ли пользовтаель отправителем в рамках этого чата (для получения истории)"}},"description":"объект получния сообщения из личного чата"},"ResponseDTOListPersonalMessageResponseDTO":{"type":"object","properties":{"code":{"type":"integer","description":"код http ответа","format":"int32"},"error":{"type":"string","description":"текст ошибки"},"response":{"type":"array","description":"объект ответа","items":{"$ref":"#/components/schemas/PersonalMessageResponseDTO"}}},"description":"объект оболочка ответа <br/>вернётся error или response"}}}}